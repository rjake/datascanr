<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Visualize variation between two groups — plot_group_split • whereiation</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Visualize variation between two groups — plot_group_split" />
<meta property="og:description" content="Visualize variation between two groups" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">whereiation</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/rjake/whereiation/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Visualize variation between two groups</h1>
    <small class="dont-index">Source: <a href='https://github.com/rjake/whereiation/blob/master/R/plot-group-split.R'><code>R/plot-group-split.R</code></a></small>
    <div class="hidden name"><code>plot_group_split.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Visualize variation between two groups</p>
    </div>

    <pre class="usage"><span class='fu'>plot_group_split</span><span class='op'>(</span>
  <span class='va'>df</span>,
  <span class='va'>split_on</span>,
  type <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"dv"</span>, <span class='st'>"count"</span>, <span class='st'>"percent_field"</span>, <span class='st'>"percent_factor"</span><span class='op'>)</span>,
  <span class='va'>dv</span>,
  <span class='va'>...</span>,
  n_cat <span class='op'>=</span> <span class='fl'>10</span>,
  trunc_length <span class='op'>=</span> <span class='fl'>100</span>,
  threshold <span class='op'>=</span> <span class='fl'>0.02</span>,
  base_group <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"1"</span>, <span class='st'>"2"</span><span class='op'>)</span>,
  return_data <span class='op'>=</span> <span class='cn'>FALSE</span>,
  n_field <span class='op'>=</span> <span class='fl'>9</span>,
  color_over <span class='op'>=</span> <span class='st'>"navyblue"</span>,
  color_under <span class='op'>=</span> <span class='st'>"red"</span>,
  color_missing <span class='op'>=</span> <span class='st'>"grey50"</span>,
  title <span class='op'>=</span> <span class='cn'>NULL</span>,
  subtitle <span class='op'>=</span> <span class='cn'>NULL</span>,
  caption <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>df</th>
      <td><p>dataframe to evaluate</p></td>
    </tr>
    <tr>
      <th>split_on</th>
      <td><p>variable to split data / group by</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>the outcome or dependent variable ("dv"), the percent of obs.
("percent"), or the number of obs. ("count")</p></td>
    </tr>
    <tr>
      <th>dv</th>
      <td><p>dependent variable to use (column name)</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Arguments passed on to <code><a href='refactor_columns.html'>refactor_columns</a></code></p><dl>
    <dt><code>id_col</code></dt><dd><p>field to use as ID</p></dd>
    <dt><code>collapse_by</code></dt><dd><p>should <code>n_cat</code> collapse by the distance to the grand
mean <code>"dv"</code> leaving the extremes as is and grouping factors closer to the
grand mean as "other" or should it use size <code>"n"</code></p></dd>
    <dt><code>n_quantile</code></dt><dd><p>for numeric/date fields, the number of quantiles used
to split the data into a factor. Fields that have less than this amount
will not be changed.</p></dd>
    <dt><code>n_digits</code></dt><dd><p>for numeric fields, the number of digits to keep in the breaks
ex: [1.2345 to 2.3456] will be [1.23 to 2.34] if <code>n_digits = 2</code></p></dd>
    <dt><code>avg_type</code></dt><dd><p>mean or median</p></dd>
    <dt><code>ignore_cols</code></dt><dd><p>columns to ignore from analysis. Good candidates are
fields that have have no duplicate values (primary keys) or fields with
a large proportion of null values</p></dd>
  
</dl></td>
    </tr>
    <tr>
      <th>n_cat</th>
      <td><p>the number of factors to keep in the y-axis. Factors will be
prioritized by the size of the difference and may not match the way
categories are collapsed in <code><a href='refactor_columns.html'>refactor_columns()</a></code></p></td>
    </tr>
    <tr>
      <th>trunc_length</th>
      <td><p>number of charcters to print on y-axis</p></td>
    </tr>
    <tr>
      <th>threshold</th>
      <td><p>threshold for excluding nominal differences. The value
should reflect the type, if the count is in the hundreds you might use 20,
meaning when viewing count differences, values where the difference is &lt;20
will be excluded. For proportion/percent and the dv type, the default is 0.02
or 2 percept</p></td>
    </tr>
    <tr>
      <th>base_group</th>
      <td><p>Should group 1 or group 2 be the base. This group will be
the bar and the other will be the point.</p></td>
    </tr>
    <tr>
      <th>return_data</th>
      <td><p>When TRUE will return data frame instead of a plot.</p></td>
    </tr>
    <tr>
      <th>n_field</th>
      <td><p>How many fields/facets should the plot return.</p></td>
    </tr>
    <tr>
      <th>color_over</th>
      <td><p>Color to use when point is higher than bar</p></td>
    </tr>
    <tr>
      <th>color_under</th>
      <td><p>Color to use when point is lower than bar</p></td>
    </tr>
    <tr>
      <th>color_missing</th>
      <td><p>Color to use when either a point or bar is missing</p></td>
    </tr>
    <tr>
      <th>title</th>
      <td><p>title for chart</p></td>
    </tr>
    <tr>
      <th>subtitle</th>
      <td><p>subtitle for chart</p></td>
    </tr>
    <tr>
      <th>caption</th>
      <td><p>caption for chart</p></td>
    </tr>
    </table>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># there are 4 types of plots available: comparing the dependent variable,</span>
<span class='co'># comparing counts, comparing % of field, comparing % within each factor</span>

<span class='co'># type = "dv" is used when comparing an outcome variable (dependent variable)</span>
<span class='co'># here we see that men have higher rates of attrition than women in most</span>
<span class='co'># categories except for when job_level = "Director" or when the person</span>
<span class='co'># works in HR</span>
<span class='va'>employee_attrition</span><span class='op'>[</span>,<span class='fl'>1</span><span class='op'>:</span><span class='fl'>4</span><span class='op'>]</span> <span class='op'>%&gt;%</span>
  <span class='fu'>plot_group_split</span><span class='op'>(</span>split_on <span class='op'>=</span> <span class='va'>gender</span>, type <span class='op'>=</span> <span class='st'>"dv"</span>, dv <span class='op'>=</span> <span class='va'>attrition</span><span class='op'>)</span>
</div><div class='img'><img src='plot_group_split-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># type = "count" is used to compare raw volume differences between two groups</span>
<span class='co'># here we see that there are more men than women in each of these areas</span>
<span class='va'>employee_attrition</span><span class='op'>[</span>,<span class='fl'>2</span><span class='op'>:</span><span class='fl'>4</span><span class='op'>]</span> <span class='op'>%&gt;%</span>
  <span class='fu'>plot_group_split</span><span class='op'>(</span>split_on <span class='op'>=</span> <span class='va'>gender</span>, type <span class='op'>=</span> <span class='st'>"count"</span><span class='op'>)</span>
</div><div class='img'><img src='plot_group_split-2.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># type = "percent_field" is used when comparing the distribution of one</span>
<span class='co'># demographic vs another. A good example would be pre- vs post-COVID</span>
<span class='co'># closures. In this example, more men are in intern and director roles</span>
<span class='co'># than the other  categories</span>
<span class='va'>employee_attrition</span><span class='op'>[</span>,<span class='fl'>2</span><span class='op'>:</span><span class='fl'>4</span><span class='op'>]</span> <span class='op'>%&gt;%</span>
  <span class='fu'>plot_group_split</span><span class='op'>(</span>split_on <span class='op'>=</span> <span class='va'>gender</span>, type <span class='op'>=</span> <span class='st'>"percent_field"</span><span class='op'>)</span>
</div><div class='img'><img src='plot_group_split-3.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># type = "percent_factor" is used when comparing the representation of two</span>
<span class='co'># groups vs how they are represented in the overall data. In this example</span>
<span class='co'># we can see that men make up ~60% of the observations but 65% of the</span>
<span class='co'># director positions and 52% of the senior position while women have the</span>
<span class='co'># inverse at 35 and 48% respectively</span>
<span class='va'>employee_attrition</span><span class='op'>[</span>,<span class='fl'>2</span><span class='op'>:</span><span class='fl'>4</span><span class='op'>]</span> <span class='op'>%&gt;%</span>
  <span class='fu'>plot_group_split</span><span class='op'>(</span>split_on <span class='op'>=</span> <span class='va'>gender</span>, type <span class='op'>=</span> <span class='st'>"percent_factor"</span><span class='op'>)</span>
</div><div class='img'><img src='plot_group_split-4.png' alt='' width='700' height='433' /></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Jake Riley.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


